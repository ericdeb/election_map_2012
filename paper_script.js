var canvas;

var timeEnd = 5;
var transitionTime = 6.5;
var transitioned = false;

var SegmentPaths = 
[[[20,0], [30,15], [40,12], [35,40], [60,90], [80,98], [100,108], [135,120], [165,150], [155,200]],
[[200,148], [167,148]],
[[300,300], [240, 260], [30,180], [70,160], [161,174], [180,174]],
[[500,200], [400,200], [300,200], [191,200], [155,200]],
[[154,500], [160,420], [120,300], [180,160], [225,148], [215,200]],
[[0,200], [215,200], [243,200]],
[[294,0], [240,104], [277,150], [267,200]],
[[500,212], [302,114], [311,148], [278,148]],
[[274,174], [293,174]],
[[290,500], [312,300], [267,200], [303,200]],
[[358,200], [326,200]], //[[356,200,-42,0], [366,150,-42,0]],
[[212,101], [290,172], [336,150], [326,200]],
[[368,150], [336,150]],
[[512,84], [418,135], [390,150], [432,150]],
[[411,150], [401,200]],
[[201,16], [194,84], [259,212], [287,167], [404,108], [455,150], [495,150]],
[[475,150], [465,200]],
[[512,242], [500,212], [485,200], [447,200]],
[[298,104], [342,188], [511,200], [521,150]], //[[528,200,-27,0], [538,150,-27,0]],
[[545,200], [555,150]], //[[528,200,27,0], [538,150,27,0]],
[[650,312], [574,244], [511,200], [545,200]],
[[400,26], [444,84], [521,150], [555,150]],
[[573,200], [583,150]],
[[584,520], [580,320], [583,150], [607,200]],
[[620,184], [607,200], [617,150]]
];

var StaticSegmentPaths = 
[[[251,250], [284, 250], [279, 275], [250, 275], [245, 300], [278, 300]],
[[311,250], [344, 250], [334, 300], [301, 300], [311, 250]],
[[379, 250], [369, 300]],
[[408,250], [441, 250], [436, 275], [407, 275], [402, 300], [435, 300]]
];

var SegmentStartTimes = [0,3,0,1,0,0,0,0,2,0,3,0,4,0,1,0,0,0,0,0,0,0,0,0,0];
var SegmentPathObjects = [];
var StaticPathObjects = [];

function initializeCanvas() {

    for (var i = 0; i < SegmentStartTimes.length; i++) {
        var tempPath = new LetSegPath(SegmentPaths[i], SegmentStartTimes[i]);
        SegmentPathObjects.push(tempPath);
    }

    for (var i = 0; i < StaticSegmentPaths.length; i++) {
        StaticPathObjects.push(new StaticText(StaticSegmentPaths[i]));
    }

    P.view.onFrame = function(event) {

        if (event.time > transitionTime) {
            if (!transitioned) {
                initializeMap();
                transitioned = true;
            }
            return;
        }

        for (i = 0; i < SegmentPathObjects.length; i++) {
            SegmentPathObjects[i].animate(event.time);
        }

        for (i = 0; i < StaticPathObjects.length; i++) {
            StaticPathObjects[i].animate(event.time);
        }

        P.view.draw();

    }

}
